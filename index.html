<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Generate a graph and a LaTeX image using the Desmos Graphing Caluculator">
  <link rel="apple-touch-icon" sizes="180x180" href="https://teth-main.github.io/BoobFuncGenerator/img/apple-touch-icon.png">
  <link rel="icon" sizes="32x32" href="https://teth-main.github.io/BoobFuncGenerator/img/icon-32x32.png">
  <link rel="icon" sizes="16x16" href="https://teth-main.github.io/BoobFuncGenerator/img/icon-16x16.png">
  <meta property="og:url" content="https://teth-main.github.io/BoobFuncGenerator" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="おっぱい関数ジェネレーター" />
  <meta property="og:description" content="おっぱい関数ジェネレーターはDesmosグラフ計算機で自由におっぱい関数の形を変えた後、記念におっぱい関数の画像を持ち帰ることができます。" />
  <meta property="og:site_name" content="おっぱい関数ジェネレーター" />
  <meta property="og:image" content="https://teth-main.github.io/BoobFuncGenerator/img/card.png" />
  <meta name="twitter:card" content="summary_large_image">
  <link rel="stylesheet" type="text/css" href="https://teth-main.github.io/BoobFuncGenerator/style.css">
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MVN8NBDB9L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-MVN8NBDB9L');
  </script>
  <script src="https://www.desmos.com/api/v1.7/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
  <title>おっぱい関数ジェネレーター</title>
</head>
<body>
  <nav class="navbar navbar-light bg-light">
    <header>
      <h3><a class="navbar-brand" href="https://teth-main.github.io/BoobFuncGenerator/">おっぱい関数ジェネレーター</a></h3>
    </header>
  </nav>
  <div class="container">
    <h3>おっぱい関数</h3>
    <p>
      おっぱい関数は、「おっぱい型の関数」のことであり、理系学生の<b>夢</b>である。<strong>おっぱい関数ジェネレーター</strong>はそんな理系学生の夢を叶えるサイトである。
      <br>
      自由に操作して、お好みのおっぱい関数を作ってください。作った後 Genarate を押すことで、おっぱい関数画像が生成され、 Save Image を押して<b>おっぱい関数をお持ち帰りください。</b>
      <br>
      <br>
      もっと詳細な操作方法を知りたい場合は<a href="https://youtu.be/obbp5q-lDjc">こちら</a>をご覧ください。
    </p>
    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="自由に弄れ、持ち帰ることができる「おっぱい関数ジェネレーター」" data-hashtags="おっぱい関数ジェネレーター" data-related="TETH_Main,TETH_function" data-size="large" data-show-count="false">Tweet</a>
  </div>
  <div class="container">
    <div id="calculator"></div>
    <div class="card">
      <div class="card-body">
        <div class="form-row">
          <div class="col">
            <label><input type="radio" id="landscape" name="imgType" checked>横長</label>
          </div>
          <div class="col">
            <label><input type="radio" id="portrait" name="imgType">縦長</label>
          </div>
          <div class="col">
            <button class="btn btn-primary" id="screenshot-button" type="button">
              <span>Generate</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container" id="generate-container">
    <div class="card">
      <div class="card-body">
        <img id="preview" alt="Preview">
        <a class="btn btn-download" id="downloadButton" role="button" download="BoobFunction.png">
          <span>Save Image</span>
        </a>
      </div>
    </div>
  </div>

  <nav class="navbar navbar-light bg-light footer">
    <footer>
      <h3 class="navbar-brand">By <a href="https://twitter.com/TETH_Main">TETH_Main</a> | <a href="https://github.com/TETH-Main/BoobFuncGenerator">Source Code</a></h3>
    </footer>
  </nav>

  <script>
    let calcElt = document.getElementById('calculator');
    let xdom = [-4.5, 4.5];
    if(screen.width < 768) xdom = [-3, 3.5];
    else if(768 <= screen.width && screen.width < 992) xdom = [-3.75, 4];

    let defaultState = {"version":0,
      "graph":{"polarMode":true,"viewport":{"xmin":xdom[0],"xmax":xdom[1]}},
      "expressions":{"list":[
        {"type":"expression","id":"0","color":"#388c46","latex":"B_{t10}=\\left[\\left(-0.36,-2.02\\right),\\left(-0.08,-1.59\\right),\\left(0.67,-1.25\\right),\\left(1.06,-0.75\\right),\\left(1.11,-0.71\\right),\\left(1.16,-0.62\\right),\\left(1.12,-0.55\\right),\\left(1.12,-0.48\\right),\\left(1.05,-0.02\\right),\\left(0.01,0.85\\right),\\left(-0.41,1.36\\right)\\right]","hidden":true},
        {"type":"expression","id":"1","color":"#000000","latex":"B_{t11}=\\left[\\left(-0.23,-1.66\\right),\\left(0.42,-1.41\\right),\\left(0.93,-1.08\\right),\\left(1.07,-0.71\\right),\\left(1.15,-0.71\\right),\\left(1.17,-0.59\\right),\\left(1.1,-0.54\\right),\\left(1.15,-0.3\\right),\\left(0.76,0.6\\right),\\left(-0.36,1.01\\right),\\left(-0.46,1.64\\right)\\right]","hidden":true},
        {"type":"expression","id":"2","color":"#c74440","latex":"B_{t12}=\\left[\\left(-0.08,-1.59\\right),\\left(0.67,-1.25\\right),\\left(1.06,-0.75\\right),\\left(1.11,-0.71\\right),\\left(1.16,-0.62\\right),\\left(1.12,-0.55\\right),\\left(1.12,-0.48\\right),\\left(1.05,-0.02\\right),\\left(0.01,0.85\\right),\\left(-0.41,1.36\\right),\\left(-0.49,1.98\\right)\\right]","hidden":true},
        {"type":"expression","id":"3","color":"#2d70b3","latex":"B_{t20}=\\left[\\left(-0.62,-2.01\\right),\\left(-0.64,-0.98\\right),\\left(-0.59,-0.62\\right),\\left(-0.12,-0.76\\right),\\left(0.76,-0.82\\right),\\left(1.27,-0.48\\right),\\left(1.33,-0.44\\right),\\left(1.41,-0.37\\right),\\left(1.4,-0.29\\right),\\left(1.41,-0.14\\right),\\left(1.27,0.51\\right),\\left(0.25,1.32\\right)\\right]","hidden":true},
        {"type":"expression","id":"4","color":"#000000","latex":"B_{t21}=\\left[\\left(-0.61,-1.6\\right),\\left(-0.65,-0.63\\right),\\left(-0.46,-0.58\\right),\\left(0.34,-0.96\\right),\\left(1.11,-0.7\\right),\\left(1.29,-0.45\\right),\\left(1.38,-0.44\\right),\\left(1.44,-0.32\\right),\\left(1.37,-0.27\\right),\\left(1.46,0.13\\right),\\left(1.04,0.91\\right),\\left(-0.18,1.52\\right)\\right]","hidden":true},
        {"type":"expression","id":"5","color":"#c74440","latex":"B_{t22}=\\left[\\left(-0.64,-0.98\\right),\\left(-0.59,-0.62\\right),\\left(-0.12,-0.76\\right),\\left(0.76,-0.82\\right),\\left(1.27,-0.48\\right),\\left(1.33,-0.44\\right),\\left(1.41,-0.37\\right),\\left(1.4,-0.29\\right),\\left(1.41,-0.14\\right),\\left(1.27,0.51\\right),\\left(0.25,1.32\\right),\\left(-0.31,1.97\\right)\\right]","hidden":true},
        {"type":"expression","id":"6","color":"#c74440","latex":"B_{t30}=\\left[\\left(-0.3,-1.99\\right),\\left(0.39,-1.62\\right),\\left(1.2,-1.21\\right),\\left(1.54,-0.23\\right),\\left(1.5,0.05\\right),\\left(1.5,0.17\\right),\\left(1.41,0.2\\right),\\left(1.23,0.27\\right),\\left(0.23,0.75\\right)\\right]","hidden":true},
        {"type":"expression","id":"7","color":"#388c46","latex":"B_{t31}=\\left[\\left(-0.14,-1.69\\right),\\left(0.85,-1.57\\right),\\left(1.63,-0.73\\right),\\left(1.45,0.02\\right),\\left(1.55,0.08\\right),\\left(1.48,0.21\\right),\\left(1.37,0.18\\right),\\left(0.94,0.5\\right),\\left(-0.47,1.06\\right)\\right]","hidden":true},
        {"type":"expression","id":"8","color":"#2d70b3","latex":"B_{t32}=\\left[\\left(0.39,-1.62\\right),\\left(1.2,-1.21\\right),\\left(1.54,-0.23\\right),\\left(1.5,0.05\\right),\\left(1.5,0.17\\right),\\left(1.41,0.2\\right),\\left(1.23,0.27\\right),\\left(0.23,0.75\\right),\\left(-0.52,1.99\\right)\\right]","hidden":true},
        {"type":"expression","id":"9","color":"#c74440","latex":"B_{t40}=\\left[\\left(-0.51,-2.01\\right),\\left(-0.42,-1.47\\right),\\left(0.04,-1.22\\right),\\left(0.71,-1.01\\right),\\left(1.16,-0.03\\right),\\left(1.17,0.1\\right),\\left(1.18,0.18\\right),\\left(1.11,0.24\\right),\\left(1.02,0.36\\right),\\left(0.48,0.93\\right),\\left(-0.07,1.32\\right)\\right]","hidden":true},
        {"type":"expression","id":"10","color":"#388c46","latex":"B_{t41}=\\left[\\left(-0.5,-1.7\\right),\\left(-0.35,-1.23\\right),\\left(0.49,-1.17\\right),\\left(1.27,-0.61\\right),\\left(1.13,0.08\\right),\\left(1.21,0.12\\right),\\left(1.16,0.25\\right),\\left(1.07,0.24\\right),\\left(0.87,0.67\\right),\\left(0.05,1.2\\right),\\left(-0.38,1.73\\right)\\right]","hidden":true},
        {"type":"expression","id":"11","color":"#2d70b3","latex":"B_{t42}=\\left[\\left(-0.42,-1.47\\right),\\left(0.04,-1.22\\right),\\left(0.71,-1.01\\right),\\left(1.16,-0.03\\right),\\left(1.17,0.1\\right),\\left(1.18,0.18\\right),\\left(1.11,0.24\\right),\\left(1.02,0.36\\right),\\left(0.48,0.93\\right),\\left(-0.07,1.32\\right),\\left(-0.37,1.98\\right)\\right]","hidden":true},
        {"type":"expression","id":"12","color":"#c74440","latex":"B_{t50}=\\left[\\left(-0.4,-2.02\\right),\\left(-0.07,-1.47\\right),\\left(0.48,-1.23\\right),\\left(1.29,-0.46\\right),\\left(1.36,-0.13\\right),\\left(1.4,-0.07\\right),\\left(1.42,-0.01\\right),\\left(1.35,0.03\\right),\\left(1.28,0.14\\right),\\left(0.78,0.59\\right),\\left(0.19,0.89\\right),\\left(-0.23,1.1\\right)\\right]","hidden":true},
        {"type":"expression","id":"13","color":"#388c46","latex":"B_{t51}=\\left[\\left(-0.27,-1.51\\right),\\left(0.08,-1.45\\right),\\left(1.03,-0.94\\right),\\left(1.37,-0.3\\right),\\left(1.36,-0.08\\right),\\left(1.43,-0.06\\right),\\left(1.41,0.04\\right),\\left(1.32,0.03\\right),\\left(1.15,0.37\\right),\\left(0.42,0.81\\right),\\left(-0.07,0.98\\right),\\left(-0.51,1.38\\right)\\right]","hidden":true},
        {"type":"expression","id":"14","color":"#2d70b3","latex":"B_{t52}=\\left[\\left(-0.07,-1.47\\right),\\left(0.48,-1.23\\right),\\left(1.29,-0.46\\right),\\left(1.36,-0.13\\right),\\left(1.4,-0.07\\right),\\left(1.42,-0.01\\right),\\left(1.35,0.03\\right),\\left(1.28,0.14\\right),\\left(0.78,0.59\\right),\\left(0.19,0.89\\right),\\left(-0.23,1.1\\right),\\left(-0.48,2\\right)\\right]","hidden":true},
        {"type":"expression","id":"15","color":"#c74440","latex":"B_{t60}=\\left[\\left(-0.61,-2.02\\right),\\left(-0.59,-1.26\\right),\\left(-0.37,-1.14\\right),\\left(0.18,-1.47\\right),\\left(0.43,-1.43\\right),\\left(0.51,-1.43\\right),\\left(0.58,-1.41\\right),\\left(0.59,-1.35\\right),\\left(0.61,-1.26\\right),\\left(0.78,-0.89\\right),\\left(0.77,0.08\\right),\\left(0.26,0.87\\right)\\right]","hidden":true},
        {"type":"expression","id":"16","color":"#388c46","latex":"B_{t61}=\\left[\\left(-0.61,-1.48\\right),\\left(-0.54,-0.97\\right),\\left(-0.12,-1.4\\right),\\left(0.28,-1.49\\right),\\left(0.46,-1.41\\right),\\left(0.55,-1.45\\right),\\left(0.61,-1.38\\right),\\left(0.55,-1.33\\right),\\left(0.68,-1.21\\right),\\left(0.92,-0.43\\right),\\left(0.52,0.64\\right),\\left(-0.3,1.34\\right)\\right]","hidden":true},
        {"type":"expression","id":"17","color":"#2d70b3","latex":"B_{t62}=\\left[\\left(-0.59,-1.26\\right),\\left(-0.37,-1.14\\right),\\left(0.18,-1.47\\right),\\left(0.43,-1.43\\right),\\left(0.51,-1.43\\right),\\left(0.58,-1.41\\right),\\left(0.59,-1.35\\right),\\left(0.61,-1.26\\right),\\left(0.78,-0.89\\right),\\left(0.77,0.08\\right),\\left(0.26,0.87\\right),\\left(-0.43,1.96\\right)\\right]","hidden":true},
        {"type":"expression","id":"18","color":"#c74440","latex":"F_{t00}=\\left[\\left(1.78,-0.88\\right),\\left(2.18,-0.93\\right),\\left(2.41,-0.16\\right),\\left(2.18,0.81\\right),\\left(1.89,-0.72\\right),\\left(1.37,-1.12\\right),\\left(1.21,-0.24\\right),\\left(0.45,0.25\\right),\\left(0.05,0.24\\right),\\left(-0.34,-0.22\\right),\\left(-0.8,-0.01\\right),\\left(-0.65,0.29\\right),\\left(-0.46,0.65\\right),\\left(-0.27,0.86\\right),\\left(1.83,0.66\\right),\\left(1.48,1.06\\right),\\left(0.86,1.25\\right),\\left(-0.76,1.3\\right),\\left(-1.44,1.37\\right),\\left(-2.21,1.38\\right),\\left(-2.42,1.1\\right),\\left(-2.28,0.76\\right),\\left(-1.7,0.52\\right),\\left(-0.84,0.52\\right),\\left(-0.86,0.52\\right),\\left(-1.16,0.14\\right),\\left(-0.96,-0.29\\right),\\left(-0.37,-0.43\\right),\\left(0.33,-0.3\\right),\\left(0.5,-0.08\\right),\\left(0.39,0.18\\right),\\left(-0.88,-0.33\\right),\\left(-0.82,-0.69\\right),\\left(-0.39,-0.96\\right),\\left(0.24,-0.94\\right),\\left(0.64,-0.69\\right),\\left(0.64,-0.47\\right),\\left(-0.44,-0.95\\right),\\left(-0.45,-1.2\\right),\\left(0.04,-1.44\\right),\\left(0.54,-1.27\\right),\\left(0.65,-0.94\\right)\\right]","hidden":true},
        {"type":"expression","id":"19","color":"#388c46","latex":"F_{t01}=\\left[\\left(2.02,-1.13\\right),\\left(2.36,-0.71\\right),\\left(2.43,0.55\\right),\\left(2.03,0.94\\right),\\left(1.8,-0.95\\right),\\left(0.96,-1.21\\right),\\left(0.41,-0.07\\right),\\left(0.19,0.24\\right),\\left(-0.02,-0.15\\right),\\left(-0.71,-0.28\\right),\\left(-0.85,0.08\\right),\\left(-0.55,0.41\\right),\\left(-0.38,0.86\\right),\\left(0.06,0.88\\right),\\left(1.81,0.86\\right),\\left(1.19,1.22\\right),\\left(0.31,1.31\\right),\\left(-1.07,1.29\\right),\\left(-2.01,1.5\\right),\\left(-2.36,1.31\\right),\\left(-2.47,0.93\\right),\\left(-2.05,0.58\\right),\\left(-1.29,0.47\\right),\\left(-0.66,0.54\\right),\\left(-1.16,0.34\\right),\\left(-1.2,-0.19\\right),\\left(-0.68,-0.44\\right),\\left(0.15,-0.42\\right),\\left(0.51,-0.2\\right),\\left(0.5,0.11\\right),\\left(0.28,0.24\\right),\\left(-0.96,-0.54\\right),\\left(-0.64,-0.92\\right),\\left(0.02,-1.02\\right),\\left(0.56,-0.84\\right),\\left(0.7,-0.56\\right),\\left(0.53,-0.29\\right),\\left(-0.52,-1.06\\right),\\left(-0.29,-1.44\\right),\\left(0.38,-1.41\\right),\\left(0.71,-1.09\\right),\\left(0.61,-0.8\\right)\\right]","hidden":true},
        {"type":"expression","id":"20","color":"#2d70b3","latex":"F_{t02}=\\left[\\left(2.18,-0.93\\right),\\left(2.41,-0.16\\right),\\left(2.18,0.81\\right),\\left(1.78,0.8\\right),\\left(1.37,-1.12\\right),\\left(0.6,-1.2\\right),\\left(0.45,0.25\\right),\\left(0.05,0.24\\right),\\left(-0.34,-0.22\\right),\\left(-0.8,-0.01\\right),\\left(-0.65,0.29\\right),\\left(-0.46,0.65\\right),\\left(-0.27,0.86\\right),\\left(0.55,0.93\\right),\\left(1.48,1.06\\right),\\left(0.86,1.25\\right),\\left(-0.76,1.3\\right),\\left(-1.44,1.37\\right),\\left(-2.21,1.38\\right),\\left(-2.42,1.1\\right),\\left(-2.28,0.76\\right),\\left(-1.7,0.52\\right),\\left(-0.84,0.52\\right),\\left(-0.51,0.53\\right),\\left(-1.16,0.14\\right),\\left(-0.96,-0.29\\right),\\left(-0.37,-0.43\\right),\\left(0.33,-0.3\\right),\\left(0.5,-0.08\\right),\\left(0.39,0.18\\right),\\left(0.18,0.24\\right),\\left(-0.82,-0.69\\right),\\left(-0.39,-0.96\\right),\\left(0.24,-0.94\\right),\\left(0.64,-0.69\\right),\\left(0.64,-0.47\\right),\\left(0.34,-0.29\\right),\\left(-0.45,-1.2\\right),\\left(0.04,-1.44\\right),\\left(0.54,-1.27\\right),\\left(0.65,-0.94\\right),\\left(0.49,-0.83\\right)\\right]","hidden":true},
        {"type":"expression","id":"21","color":"#000000","latex":"B\\left(E_{0},E_{1},E_{2}\\right)=\\left(E_{0}.x\\left[i\\left(t,E_{0}\\right)\\right]\\cdot\\left(1-j\\left(t,E_{0}\\right)\\right)^{2}+2E_{1}.x\\left[i\\left(t,E_{1}\\right)\\right]j\\left(t,E_{1}\\right)\\left(1-j\\left(t,E_{1}\\right)\\right)+E_{2}.x\\left[i\\left(t,E_{2}\\right)\\right]j\\left(t,E_{2}\\right)^{2},E_{0}.y\\left[i\\left(t,E_{0}\\right)\\right]\\left(1-j\\left(t,E_{0}\\right)\\right)^{2}+2E_{1}.y\\left[i\\left(t,E_{1}\\right)\\right]j\\left(t,E_{1}\\right)\\left(1-j\\left(t,E_{1}\\right)\\right)+E_{2}.y\\left[i\\left(t,E_{2}\\right)\\right]j\\left(t,E_{2}\\right)^{2}\\right)"},
        {"type":"expression","id":"22","color":"#c74440","latex":"i\\left(x,E\\right)=\\operatorname{ceil}\\left(\\operatorname{length}\\left(E\\right)x\\right)"},
        {"type":"expression","id":"23","color":"#2d70b3","latex":"j\\left(x,E\\right)=\\operatorname{mod}\\left(\\operatorname{length}\\left(E\\right)x,1\\right)"},
        {"type":"expression","id":"24","color":"#388c46"},
        {"type":"expression","id":"25","color":"#c74440","latex":"g\\left(x\\right)=-\\frac{1}{\\left(x-\\frac{\\pi}{2}\\right)\\left(x+\\frac{\\pi}{2}\\right)}+0.4","hidden":true},
        {"type":"expression","id":"26","color":"#2d70b3","latex":"h\\left(x\\right)=.05n_{ipple}\\exp\\left(-\\left(\\left(15+P\\right)x\\right)^{4}\\right)","hidden":true},
        {"type":"expression","id":"27","color":"#6042a6","latex":"a_{re}\\left(x\\right)=.05a_{reola}\\exp\\left(-\\left(\\left(8+.5P\\right)x\\right)^{6}\\right)","hidden":true},
        {"type":"expression","id":"28","color":"#388c46","latex":"l\\left(x\\right)=\\frac{P}{20}\\exp\\left(-x^{2}\\right)","hidden":true},
        {"type":"expression","id":"29","color":"#fa7e19","latex":"m\\left(x\\right)=-\\frac{s_{oft}+1}{7\\sqrt{\\left(A.x+1\\right)^{2}+A.y^{2}}}\\left(\\exp\\left(-3x^{2}\\right)\\right)","hidden":true},
        {"type":"expression","id":"30","color":"#c74440","latex":"o_{01}\\left(x\\right)=\\frac{P}{120}\\left(\\frac{6x+1}{x^{2}+x+1}\\right)","hidden":true},
        {"type":"expression","id":"31","color":"#2d70b3","latex":"o_{02}\\left(x\\right)=\\frac{P}{60}\\left(\\frac{1}{2x+e^{2\\left(x+2\\left|x\\right|\\right)}}\\right)","hidden":true},
        {"type":"expression","id":"32","color":"#000000","latex":"o_{03}\\left(x\\right)=\\frac{P}{60}\\frac{3x+1}{x^{2}+x+3}","hidden":true},
        {"type":"expression","id":"33","color":"#388c46","latex":"o_{04}\\left(x\\right)=\\frac{P}{120}e^{-10x^{2}}","hidden":true},
        {"type":"expression","id":"34","color":"#000000","latex":"o_{05}\\left(x\\right)=\\frac{P}{30}\\left(2\\exp\\left(-x^{2}\\right)-3\\exp\\left(-10\\left(x+.44\\right)^{2}\\right)\\right)","hidden":true},
        {"type":"expression","id":"35","color":"#2d70b3"},
        {"type":"expression","id":"36","color":"#000000","latex":"G\\left(x\\right)=g\\left(x\\right)+m\\left(x-\\arctan\\left(A.y,A.x\\right)\\right)","hidden":true},
        {"type":"expression","id":"37","color":"#000000","latex":"P_{00}\\left(x\\right)=l\\left(x+\\frac{P}{100}\\right)+h\\left(\\frac{15}{.5P+10}\\left(x+\\frac{P}{100}\\right)\\right)+a_{re}\\left(\\frac{10}{.5P+10}\\left(x+\\frac{P}{100}\\right)\\right)","hidden":true,"polarDomain":{"min":"-.5\\pi","max":".5\\pi"}},
        {"type":"expression","id":"38","color":"#000000","latex":"P_{01}\\left(x\\right)=l\\left(x+\\frac{P}{100}\\right)+h\\left(\\frac{10}{.25P+10}\\left(x+\\frac{P}{200}\\right)\\right)+a_{re}\\left(\\frac{10}{.5P+10}\\left(x+\\frac{P}{200}\\right)\\right)+o_{01}\\left(x+\\frac{P}{200}\\right)","hidden":true,"polarDomain":{"min":"-.5\\pi","max":".5\\pi"}},
        {"type":"expression","id":"39","color":"#000000","latex":"P_{02}\\left(x\\right)=l\\left(x+\\frac{P}{100}\\right)+h\\left(\\frac{10}{.5P+10}\\left(x-.4+\\frac{P}{100}\\right)\\right)+a_{re}\\left(\\frac{10}{.5P+10}\\left(x-.4+\\frac{P}{100}\\right)\\right)+o_{02}\\left(x-.4+\\frac{P}{100}\\right)","hidden":true,"polarDomain":{"min":"-.5\\pi","max":".5\\pi"}},
        {"type":"expression","id":"40","color":"#6042a6","latex":"P_{03}\\left(x\\right)=l\\left(x+\\frac{P}{100}\\right)+h\\left(\\frac{15}{.25P+15}\\left(x-.4+\\frac{P}{100}\\right)\\right)+a_{re}\\left(\\frac{20}{.5P+20}\\left(x-.4+\\frac{P}{100}\\right)\\right)+o_{03}\\left(x-.4+\\frac{P}{100}\\right)","hidden":true},
        {"type":"expression","id":"41","color":"#6042a6","latex":"P_{04}\\left(x\\right)=l\\left(x+\\frac{P}{150}\\right)+h\\left(\\frac{15}{.2P+15}x\\right)+a_{re}\\left(\\frac{15}{.5P+15}x\\right)+o_{04}\\left(x\\right)","hidden":true},
        {"type":"expression","id":"42","color":"#c74440","latex":"P_{05}\\left(x\\right)=h\\left(\\frac{15}{.3P+15}\\left(x+\\frac{7\\sqrt{P}+20}{60}\\right)\\right)+a_{re}\\left(\\frac{15}{.5P+15}\\left(x+\\frac{7\\sqrt{P}+20}{60}\\right)\\right)+o_{05}\\left(x+\\frac{P}{100}+.86\\right)","hidden":true},
        {"type":"expression","id":"43","color":"#c74440","latex":"o_{p}\\left(\\theta\\right)=\\left[P_{00}\\left(\\theta\\right),P_{01}\\left(\\theta\\right),P_{02}\\left(\\theta\\right),P_{03}\\left(\\theta\\right),P_{04}\\left(\\theta\\right),P_{05}\\left(\\theta\\right)\\right]","hidden":true},
        {"type":"expression","id":"44","color":"#2d70b3"},
        {"type":"expression","id":"45","color":"#000000","latex":"r=G\\left(\\theta\\right)+o_{p}\\left(\\theta\\right)\\left[o_{pn}\\right]","hidden":true,"polarDomain":{"min":"-.5\\pi","max":".5\\pi"},"colorLatex":"C"},
        {"type":"expression","id":"46","color":"#000000","latex":"\\left(\\left(G\\left(t\\right)+o_{p}\\left(t\\right)\\left[o_{pn}\\right]\\right)\\cos t,\\left(G\\left(t\\right)+o_{p}\\left(t\\right)\\left[o_{pn}\\right]\\right)\\sin t\\right)","parametricDomain":{"min":"-.5\\pi","max":".5\\pi"},"domain":{"min":"-.5\\pi","max":".5\\pi"},"lineOpacity":"1"},
        {"type":"expression","id":"47","color":"#000000","latex":"\\left(-\\left(G\\left(t\\right)+o_{p}\\left(t\\right)\\left[o_{pn}\\right]\\right)\\sin t,\\left(G\\left(t\\right)+o_{p}\\left(t\\right)\\left[o_{pn}\\right]\\right)\\cos t\\right)","parametricDomain":{"min":"-.5\\pi","max":".5\\pi"},"domain":{"min":"-.5\\pi","max":".5\\pi"},"lineOpacity":"0","lineWidth":"3"},
        {"type":"expression","id":"48","color":"#388c46"},
        {"type":"expression","id":"49","color":"#2d70b3","latex":"l_{ock}=\\left[l_{0},l_{1},l_{2},l_{3},l_{4},l_{5},l_{6},l_{7},l_{8},l_{9},l_{10}\\right]"},
        {"type":"expression","id":"50","color":"#6042a6","latex":"l_{0}=\\operatorname{round}\\left(-\\frac{s_{oft}+1}{7\\sqrt{\\left(A.x+1\\right)^{2}+A.y^{2}}},3\\right)"},
        {"type":"expression","id":"51","color":"#c74440","latex":"l_{1}=\\operatorname{round}\\left(\\arctan\\left(A.y,A.x\\right),3\\right)"},
        {"type":"expression","id":"52","color":"#2d70b3","latex":"l_{2}=\\operatorname{round}\\left(\\frac{P}{20},3\\right)"},
        {"type":"expression","id":"53","color":"#388c46","latex":"l_{3}=\\operatorname{round}\\left(\\left\\{o_{pn}=5:\\frac{P}{150},\\frac{P}{100}\\right\\},3\\right)"},
        {"type":"expression","id":"54","color":"#6042a6","latex":"l_{4}=\\operatorname{round}\\left(.05n_{ipple},3\\right)"},
        {"type":"expression","id":"55","color":"#000000","latex":"l_{5}=\\operatorname{round}\\left(\\left\\{o_{pn}=1:\\frac{15}{.5P+10},o_{pn}=2:\\frac{10}{.25P+10},o_{pn}=3:\\frac{10}{.5P+10},o_{pn}=4:\\frac{15}{.25P+15},o_{pn}=5:\\frac{15}{.2P+15},o_{pn}=6:\\frac{15}{.3P+15}\\right\\}\\cdot\\left(15+P\\right),3\\right)"},
        {"type":"expression","id":"56","color":"#388c46","latex":"l_{6}=\\operatorname{round}\\left(\\left\\{o_{pn}=1:\\frac{P}{100},o_{pn}=2:\\frac{P}{200},o_{pn}=3:-.4+\\frac{P}{100},o_{pn}=4:-.4+\\frac{P}{100},o_{pn}=5:0,o_{pn}=6:\\frac{7\\sqrt{P}+20}{60}\\right\\},3\\right)"},
        {"type":"expression","id":"57","color":"#6042a6","latex":"l_{7}=\\operatorname{round}\\left(.05a_{reola},3\\right)"},
        {"type":"expression","id":"58","color":"#000000","latex":"l_{8}=\\operatorname{round}\\left(\\left\\{o_{pn}=1:\\frac{10}{.5P+10},o_{pn}=2:\\frac{10}{.5P+10},o_{pn}=3:\\frac{10}{.5P+10},o_{pn}=4:\\frac{20}{.5P+20},o_{pn}=5:\\frac{15}{.5P+15},o_{pn}=6:\\frac{15}{.5P+15}\\right\\}\\cdot\\left(8+.5P\\right),3\\right)"},
        {"type":"expression","id":"59","color":"#c74440","latex":"l_{9}=\\operatorname{round}\\left(\\left\\{o_{pn}=2:\\frac{P}{120},o_{pn}=3:\\frac{P}{60},o_{pn}=4:\\frac{P}{60},o_{pn}=5:\\frac{P}{120},o_{pn}=6:\\frac{P}{30}\\right\\},3\\right)"},
        {"type":"expression","id":"60","color":"#388c46","latex":"l_{10}=\\operatorname{round}\\left(\\left\\{o_{pn}=2:\\frac{P}{200},o_{pn}=3:-.4+\\frac{P}{100},o_{pn}=4:-.4+\\frac{P}{100},o_{pn}=5:0,o_{pn}=6:.86+\\frac{P}{100}\\right\\},3\\right)"},
        {"type":"expression","id":"61","color":"#2d70b3","latex":"h_{ide}=0","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"1","step":"1"}},
        {"type":"expression","id":"62","color":"#388c46"},
        {"type":"expression","id":"63","color":"#388c46","latex":"o_{pn}=1","slider":{"hardMin":true,"hardMax":true,"min":"1","max":"6","step":"1"}},
        {"type":"expression","id":"64","color":"#000000","latex":"\\left[\\operatorname{polygon}\\left(.4\\cdot\\left[\\left(1,1\\right),\\left(-1,1\\right),\\left(-1,-1\\right),\\left(1,-1\\right)\\right]-\\left(\\operatorname{mod}\\left(I,2\\right),\\operatorname{ceil}\\left(\\frac{I}{2}\\right)\\right)+\\left(-.75,1\\right)\\right)\\operatorname{for}I=\\left[1...6\\right]\\left\\{h_{ide}=0\\right\\}\\right]","labelSize":"medium","clickableInfo":{"enabled":true,"latex":"o_{pn}\\to\\operatorname{index}"}},
        {"type":"expression","id":"65","color":"#2d70b3","latex":"C=\\operatorname{hsv}\\left(0,0,1\\right)"},
        {"type":"expression","id":"66","color":"#000000","latex":".15B\\left(B_{t10},B_{t11},B_{t12}\\right)+\\left(-1.75,0\\right)\\left\\{h_{ide}=0\\right\\}","colorLatex":"C","lineWidth":"3"},
        {"type":"expression","id":"67","color":"#000000","latex":".15B\\left(B_{t20},B_{t21},B_{t22}\\right)+\\left(-.75,0\\right)\\left\\{h_{ide}=0\\right\\}","colorLatex":"C","lineWidth":"3"},
        {"type":"expression","id":"68","color":"#000000","latex":".15B\\left(B_{t30},B_{t31},B_{t32}\\right)+\\left(-1.75,-1\\right)\\left\\{h_{ide}=0\\right\\}","colorLatex":"C","lineWidth":"3"},
        {"type":"expression","id":"69","color":"#000000","latex":".15B\\left(B_{t40},B_{t41},B_{t42}\\right)+\\left(-.75,-1\\right)\\left\\{h_{ide}=0\\right\\}","colorLatex":"C","lineWidth":"3"},
        {"type":"expression","id":"70","color":"#000000","latex":".15B\\left(B_{t50},B_{t51},B_{t52}\\right)+\\left(-1.75,-2\\right)\\left\\{h_{ide}=0\\right\\}","colorLatex":"C","lineWidth":"3"},
        {"type":"expression","id":"71","color":"#000000","latex":".15B\\left(B_{t60},B_{t61},B_{t62}\\right)+\\left(-.75,-2\\right)\\left\\{h_{ide}=0\\right\\}","colorLatex":"C","lineWidth":"3"},
        {"type":"expression","id":"72","color":"#2d70b3","latex":"\\left[.1,.3\\right]\\left(\\cos\\tau t,\\sin\\tau t\\right)+\\left(\\left[-2.25,0\\right],2\\right)\\left\\{h_{ide}=0\\right\\}","fill":true,"lineWidth":"5","clickableInfo":{"enabled":true,"latex":"\\left\\{\\operatorname{index}=1:\\left\\{P>0:P\\to P-1,P\\to0\\right\\},\\operatorname{index}=2:\\left\\{P<30:P\\to P+1,P\\to30\\right\\}\\right\\}"}},
        {"type":"expression","id":"73","color":"#000000","latex":"\\left(\\frac{P}{20\\left(1-h_{ide}\\right)}-2,2\\right)"},
        {"type":"expression","id":"74","color":"#2d70b3","latex":"\\left(1.5t-2,2\\right)\\left\\{h_{ide}=0\\right\\}","lineWidth":"5"},
        {"type":"expression","id":"75","color":"#2d70b3"},
        //{"type":"expression","id":"76","color":"#000000","latex":"P=10","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"30"}},
        {"type":"expression","id":"77","color":"#000000"},
        {"type":"expression","id":"78","color":"#000000","latex":"A=\\left(2.72,0\\right)","dragMode":"XY","pointOpacity":"1-h_{ide}"},
        {"type":"expression","id":"79","color":"#000000","latex":"A_{c}=\\arctan\\left(A.y,A.x\\right)"},
        {"type":"expression","id":"80","color":"#6042a6","latex":"R\\left(E,\\theta\\right)=\\left(E.x\\cos\\left(\\theta\\right)-E.y\\sin\\left(\\theta\\right),E.x\\sin\\left(\\theta\\right)+E.y\\cos\\left(\\theta\\right)\\right)"},
        {"type":"expression","id":"81","color":"#000000","latex":"h_{ideTouch}=0","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"1"}},
        //{"type":"expression","id":"82","color":"#388c46","latex":"s_{oft}=0","hidden":true,"slider":{"hardMin":true,"hardMax":true,"min":"0"}},
        {"type":"expression","id":"83","color":"#000000","latex":".2B\\left(R\\left(F_{t00},A_{c}\\right),R\\left(F_{t01},A_{c}\\right),R\\left(F_{t02},A_{c}\\right)\\right)+A\\left\\{h_{ide}=0\\right\\}","clickableInfo":{"enabled":true,"latex":"s_{oft}\\to0"}},
        {"type":"expression","id":"84","color":"#388c46","latex":".75\\left(\\cos t,\\sin t\\right)+A\\left\\{h_{ide}=0\\right\\}","lineStyle":"DASHED","parametricDomain":{"min":"","max":"\\tau"},"domain":{"min":"0","max":"\\tau"}},
        {"type":"expression","id":"85","color":"#388c46","latex":".75\\left(\\cos t,\\sin t\\right)+A\\left\\{h_{ide}=0\\right\\}","parametricDomain":{"min":"","max":"\\frac{2\\pi s_{oft}}{10}"},"lineWidth":"5","domain":{"min":"0","max":"\\frac{2\\pi s_{oft}}{10}"}},
        {"type":"expression","id":"86","color":"#000000","latex":"\\left(.75\\cos\\left(\\frac{2\\pi s_{oft}}{10}\\right)+A.x,.75\\sin\\left(\\frac{2\\pi s_{oft}}{10}\\right)+A.y\\right)","dragMode":"XY","pointOpacity":"1-h_{ide}"},
        {"type":"expression","id":"87","color":"#c74440"},
        //{"type":"expression","id":"88","color":"#000000","latex":"n_{ipple}=1","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"1"}},
        {"type":"expression","id":"89","color":"#c74440","latex":"\\operatorname{polygon}\\left(\\left[\\left(-1.75,1.6\\right),\\left(-1.75,.6\\right),\\left(-.75,.6\\right),\\left(-.75,1.6\\right)\\right]\\left\\{h_{ide}=0\\right\\}\\right)","lines":false,"fillOpacity":"0.2"},
        {"type":"expression","id":"90","color":"#c74440","latex":"\\left(\\left[-1.85,-.75\\right],1.6\\right)\\left\\{h_{ide}=0\\right\\}","points":false,"lines":true,"dragMode":"NONE","labelSize":"medium","clickableInfo":{"enabled":true,"latex":"n_{ipple}\\to0"}},
        {"type":"expression","id":"91","color":"#000000","latex":"\\left(-1.25,1.6\\right)\\left\\{h_{ide}=0\\right\\}","showLabel":true,"label":"nipple","hidden":true,"labelOrientation":"above"},
        //{"type":"expression","id":"92","color":"#2d70b3","latex":"a_{reola}=0","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"1"}},
        {"type":"expression","id":"93","color":"#c74440","latex":"\\left(-1.75,\\left[1.7,.6\\right]\\left\\{h_{ide}=0\\right\\}\\right)","points":false,"lines":true,"dragMode":"NONE","labelSize":"medium","clickableInfo":{"enabled":true,"latex":"a_{reola}\\to0"}},
        {"type":"expression","id":"94","color":"#000000","latex":"\\left(-1.75,1.15\\right)\\left\\{h_{ide}=0\\right\\}","showLabel":true,"label":"areola","hidden":true,"labelOrientation":"above","labelAngle":"\\frac{\\pi}{2}"},
        {"type":"expression","id":"95","color":"#c74440","latex":"\\left(n_{ipple}-1.75,-a_{reola}+1.6\\right)","pointOpacity":"1-h_{ide}"}
      ]}
    };

    let calculator = Desmos.GraphingCalculator(calcElt, {
      keypad: false,
      settingMenu: false,
      expressions: false,
      lockViewport: true,
      pasteGraphLink: true
    });
    calculator.setState(defaultState);

    calculator.setExpressions([
      {id: '76', latex: 'P=10', sliderBounds: { min: 0, max: 30}},
      {id: '82', latex: 's_{oft}=0', sliderBounds: { min: 0, max: 10}},
      {id: '88', latex: 'n_{ipple}=1', sliderBounds: { min: 0, max: 1}},
      {id: '92', latex: 'a_{reola}=0', sliderBounds: { min: 0, max: 1}}
    ]);

    let hideId = 61; // h_ide id
    let O_oppId = 46; // original
    let S_oppId = 47; // for screenshot

    let lock = calculator.HelperExpression({latex:'l_{ock}'});
    let lockVal = new Array(-0.038, 0, 0.5, 0.1, 0.05, 25, 0.1, 0, 8.667, 0, 0);
    lock.observe('listValue', function() {
      lockVal = lock.listValue;
    });
    
    let type = calculator.HelperExpression({latex:'o_{pn}'});
    let typeVal = 1;
    type.observe('numericValue', function() {
      typeVal = type.numericValue;
    });

    let btnElt = document.getElementById('screenshot-button');
    btnElt.addEventListener('click', generate);
    let containerElt = document.getElementById('generate-container');

    let credit = document.getElementById("credit");

    let preview = document.getElementById('preview');
    let download = document.getElementById('downloadButton');

    let canvas = document.createElement('canvas');
    let context = canvas.getContext('2d');

    let imgType = document.getElementsByName('imgType');
    let imgFlg = imgType.item(0).checked;

    preview.onload = function() {
      containerElt.style.display = 'block';
      preview.onload = null;
    };

    function r(e) {
      return Math.round(e*1000)/1000;
    }

    function c(e) {
      if(e > 0) return "+"+e;
      else return ""+e;
    }

    function generate() {
      imgFlg = imgType.item(0).checked;

      let expr = "";
      let gx = "\\left|x^{2}-\\frac{\\pi^{2}}{4}\\right|^{-\\frac{1}{2}}";
      let mx = lockVal[0]+"e^{-3" + (lockVal[1] === 0 ? "\\theta" : "\\left(\\theta"+c(lockVal[1])+"\\right)") + "^{2}}";
      let lx = "+"+lockVal[2]+"e^{-" + (lockVal[3] === 0 ? "\\theta" : "\\left(\\theta"+c(lockVal[3])+"\\right)") + "^{2}}";
      let hx = lockVal[4] === 0 ? "" : ("+"+lockVal[4]+"e^{-\\left("+ lockVal[5] + (lockVal[6] === 0 ? "\\theta" : "\\left(\\theta"+c(lockVal[6])+"\\right)") + "\\right)^{4}}");
      let ax = lockVal[7] === 0 ? "" : ("+"+lockVal[7]+"e^{-\\left("+ lockVal[8] + (lockVal[6] === 0 ? "\\theta" : "\\left(\\theta"+c(lockVal[6])+"\\right)") + "\\right)^{6}}");
      let labSize = 2.4;
      if(lockVal[0] != 0) labSize -= 0.15;
      if(lockVal[4] != 0) labSize -= 0.15;
      if(lockVal[7] != 0) labSize -= 0.15;

      expr += "r="+ gx + mx + lx;
      let op = hx + ax;
      if(lockVal[2] > 0) { // P > 0
        switch(typeVal) {
          case 2:
            var buf1 = r(lockVal[10] + 1/6);
            var buf2 = r(lockVal[10] + 1/2);
            op += "+"+lockVal[9]*6+"\\frac{\\theta+"+buf1+"}{\\left(\\theta+"+buf2+"\\right)^{2}+\\frac{3}{4}}";
            labSize -= 0.25;
            break;
          case 3:
            var buf1 = lockVal[10] === 0 ? "\\theta" : "\\left(\\theta"+lockVal[10]+"\\right)";
            var buf2 = lockVal[10] === 0 ? "\\theta" : "\\theta"+lockVal[10];
            op += "+\\frac{"+lockVal[9]+"}{2"+buf1+"+e^{2\\left("+buf2+"+2\\left|"+buf2+"\\right|\\right)}}";
            labSize -= 0.4;
            break;
          case 4:
            var buf1 = r(lockVal[10] + 1/3);
            var buf2 = r(lockVal[10] + 1/2);
            op += "+"+lockVal[9]*3+"\\frac{\\left(\\theta+"+buf1+"\\right)}{\\left(\\theta+"+buf2+"\\right)^{2}+\\frac{11}{4}}";
            labSize -= 0.35;
            break;
          case 5:
            op += "+"+lockVal[9]+"e^{-10\\theta^{2}}";
            break;
          case 6:
            var buf1 = r(2*lockVal[9]);
            var buf2 = r(lockVal[10]+.44);
            op += "+"+buf1+"e^{-"+ (lockVal[10] === 0 ? "\\theta" : "\\left(\\theta+"+lockVal[10]+"\\right)") +"^{2}}-"+3*lockVal[10]+"e^{-10"+ (lockVal[10] === -.44 ? "\\theta" : "\\left(\\theta+"+buf2+"\\right)" ) +"^{2}}";
            labSize -= 0.5;
            break;
        }
      }

      let pageY = pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      let pageX = pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft;
      scrollTo(0, 0);

      let graphImg = new Image();
      let mergeImg = new Image();
      canvas.width = 1920;
      canvas.height = 1080;

      Promise.all([
        new Promise(resolve => graphImg.onload = resolve),
        new Promise(resolve => mergeImg.onload = resolve)
      ]).then(function() {
        context.drawImage(mergeImg, 0, 0, 1920, 1080);
        context.fillStyle = '#fff';
        context.fillRect(0, 1080-2, 1920, 1080);

        if(imgFlg) { // 横長
          context.drawImage(graphImg, 320, 96, 1280, 640);
          context.strokeRect(320, 96, 1280, 640);
        } else { // 縦長
          context.drawImage(graphImg, 32, 70, 480, 960);
          context.strokeRect(32, 70, 480, 960);
        }

        context.font = '25px serif';
        context.fillStyle = 'black';
        context.textAlign = 'right';
        context.fillText('https://teth-main.github.io/BoobFuncGenerator by @TETH_Main', 1920 - 10, 1080 - 10);

        download.href = preview.src = canvas.toDataURL();
      });

      if(imgFlg) {
        calculator.setExpressions([
          {id: O_oppId, lineOpacity: '0'},
          {id: S_oppId, lineOpacity: '1'}
        ]);
      }
      calculator.setExpression({id: hideId, latex: 'h_{ide}=1'});
      
      if(imgFlg) {
        calculator.asyncScreenshot({
          width: 640,
          height: 320,
          targetPixelRatio: 2,
          mathBounds: {left: -4, right: 4, bottom: -1, top: 3}
        }, function(s) {
          graphImg.src = s;
        })
      } else {
        calculator.asyncScreenshot({
          width: 320,
          height: 640,
          targetPixelRatio: 2,
          mathBounds: {left: -0.5, right: 2.5, bottom: -3, top: 3}
        }, function(s) {
          graphImg.src = s;
        })
      }

      calculator.setExpression({
        id: 'background',
        latex: 'x^2>-1',
        color: 'white',
        fillOpacity: '1',
        secret: true
      });

      if(!imgFlg) labSize += 0.25;
      calculator.setExpression({
        id: 'label1',
        latex: imgFlg ? '\\left(0,-720\\right)' : '\\left(-800,200\\right)',
        color: 'black',
        label: '`' + (imgFlg ? expr + op : expr) + '`',
        hidden: true,
        showLabel: true,
        secret: true,
        labelSize: '0' + labSize,
        labelOrientation: (imgFlg ? 'default' : 'right')
      });
      if(!imgFlg) {
        calculator.setExpression({
          id: 'label2',
          latex: '\\left(1850,50\\right)',
          color: 'black',
          label: '`' + op + '`',
          hidden: true,
          showLabel: true,
          secret: true,
          labelSize: '0' + labSize + (typeVal === 6 ? -0.25 : 0),
          labelOrientation: 'left'
        });
      }

      calculator.setExpression({
        id: 'domain',
        latex: imgFlg ? '\\left(0,-900\\right)' : '\\left(1000,-150\\right)',
        color: 'black',
        label: '`\\left\\{-\\frac{\\pi}{2}\\le\\theta\\le\\frac{\\pi}{2}\\right\\}`',
        hidden: true,
        showLabel: true,
        secret: true,
        labelSize: '2'
      });
      calculator.asyncScreenshot({
        showLabels: true,
        width: 1920,
        height: 1080,
        targetPixelRatio: 2,
        mathBounds: {left: -1920, right: 1920, bottom: -1080, top: 1080}
      }, function(s) {
        mergeImg.src = s;
        calculator.removeExpressions([
          {id: 'background'},
          {id: 'label1'},
          {id: 'label2'},
          {id: 'domain'}
        ]);
        calculator.setExpression({id: S_oppId, lineWidth: 2.5});
        scrollTo(pageX, pageY);

        calculator.setExpressions([
          {id: O_oppId, lineOpacity: '1'},
          {id: S_oppId, lineOpacity: '0'},
          {id: hideId, latex: 'h_{ide}=0'}
        ]);
      });
    }

  </script>

</body>
</html>
